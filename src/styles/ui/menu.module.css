/* === Top bar ============================================================= */

/* Wrap around the Menu button so dropdown aligns purely with CSS */
.menuTrigger {
    position: relative;
    display: inline-block;        /* shrink-to-content (the Menu button) */
  }
  
  .menuContainer {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  
    z-index: 50;
    width: calc(100% - var(--space-lg));
  
    /* Content layer stays transparent; blur lives on ::before */
    background: transparent;
    box-shadow:  0 1px 0 rgba(var(--color-foreground-rgb), 0.08);
  
    --bar-h: 24px;
    height: var(--bar-h);
  
    padding: var(--space-xs) var(--space-md);
  
    /* Needed so the ::before blur isolates correctly */
    isolation: isolate;
  
    /* Let dropdowns/submenus render outside by default */
    overflow: visible;
  }
  
  /* Blur layer for the top bar */
  .menuContainer::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
  
    /* Non-zero alpha so Safari renders the blur */
    background: rgba(var(--color-background-rgb), 0.12);
    backdrop-filter: saturate(180%) blur(22px);
    -webkit-backdrop-filter: saturate(180%) blur(22px);
  
    pointer-events: none;
    z-index: -1;
  }
  
  .menuContainer.expanded {
    max-height: 260px;
    /* keep overflow visible so submenus can escape the bar */
  }
  
  .menuBar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: default;
  }
  
  .leftGroup,
  .rightGroup {
    display: flex;
    align-items: center;
  }

  .leftGroup {
    gap: var(--space-md);
  }
 
  .rightGroup {
    gap: var(--space-xxs);
  }
  
  .logo {
    margin: 0;
    line-height: 1;
    font-size: 0.85rem;
    font-variation-settings: var(--var-lg);
    color: var(--color-foreground);
  }
  
  .menuText {
    font-size: 0.85rem;
    font-variation-settings: var(--var-md);
    color: var(--color-foreground);
    background: transparent;
    border: 0;
    padding: 2px 6px;
    border-radius: var(--radius-xs);
    cursor: default;
    height: 1.5rem;
  }
  .menuText:hover,
  .menuText:focus-visible {
    background-color: rgba(var(--brand-grey-rgb), 0.3);
  }
  
  .rightIcons {
    display: flex;
    gap: var(--space-xs);
  }
  
  .rightIcons > * {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 1.5rem;
    width: 2rem;
    color: var(--color-foreground);
    background: transparent;
    border-radius: var(--radius-xs);
  }
  .rightIcons > *:hover {
    background: rgba(var(--brand-grey-rgb), 0.3);
  }
  
  /* === macOS-like dropdown panel ========================================== */
  
  .menuDropdown {
    
    position: absolute;
    top: calc(var(--bar-h) + 0.3rem);
    left: 0;
    width: min(230px, calc(100vw - 16px));
    max-width: calc(100vw - 16px);
    z-index: 1000;
  
    /* Content transparent; blur on ::before */
    background: rgba(var(--color-background-rgb), 0.7);
  
    border-radius: var(--radius-sm);
    box-shadow:
      0 0 1px 0 rgba(var(--color-foreground-rgb), 0.60),
      0 0 7px 0 rgba(0, 0, 0, 0.20);
    padding: 6px;
    z-index: 55;
  
    isolation: isolate; /* contain the blur layer */
  }
  
  /* Blur layer for dropdown */
  .menuDropdown::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
  
    background: rgba(var(--brand-grey-rgb), 0.1);
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
  
    pointer-events: none;
    z-index: -1;
  }
  .menuTextActive {
    background-color: rgba(var(--brand-grey-rgb), 0.3);
  }
  
  .menuList {
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  /* Standard menu row */
  .row {
    box-sizing: border-box;
    width: 100%;            /* was: calc(100%) */
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 24px;
    padding: 0 10px;
    border: 0;
    background: none;
    color: var(--color-foreground);
    text-decoration: none;
    font-size: 0.85rem;

    font-variation-settings: var(--var-md);
    border-radius: var(--radius-xs);
    cursor: default;
  }
  
  /* Hover highlight like macOS */
  .item:hover > .row,
  .item:focus-within > .row {
    background: var(--brand-blue);
    color: white;
  }
  
  /* Separators */
  .separator {
    height: 1px;
    margin: 6px 4px;
    background: rgba(var(--color-foreground-rgb), 0.12);
  }
  
  /* Disabled items */
  .item[aria-disabled="true"] .row,
  .item .row:disabled {
    opacity: 0.45;
    pointer-events: none;
  }
  
  /* === Submenu (cascading) ================================================= */
  
  .hasSubmenu { position: relative;
     }
  
  .submenuGlyph {
    margin-top: 4px;
    margin-left: 12px;
    margin-right: -7px;
    opacity: 0.9;
  }
  
  /* hidden by default, appears to the right on hover/focus */
  .submenu {
    position: absolute;
    white-space: nowrap;
    top: -6px;
    left: calc(100%);
    width: fit-content;
    list-style: none;
  
    /* Content transparent; blur on ::before */
    background: rgba(var(--color-background-rgb), 0.7);
  
    border-radius: var(--radius-sm);
    box-shadow:
      0 0 1px 0 rgba(var(--color-foreground-rgb), 0.60),
      0 0 7px 0 rgba(0, 0, 0, 0.20);
    padding: 6px;
  
    opacity: 0;
    transform: translateX(-6px);
    pointer-events: none;
  
    isolation: isolate; /* contain the blur layer */
  }
  
  /* Blur layer for submenu */
  .submenu::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
  
    background: rgba(var(--brand-grey-rgb), 0.1);
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
  
    pointer-events: none;
    z-index: -1;
  }
  
  /* reveal on parent hover/focus */
  .hasSubmenu:hover > .submenu,
  .hasSubmenu:focus-within > .submenu {
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto;
  }

  /* make submenu rows align icon + text on the left */
    .submenu .row { justify-content: flex-start; }

    /* icon sizing + spacing */
    .rowIcon {
    flex: 0 0 16px;
    margin-right: 5px;
    display: inline-block;
    vertical-align: middle;
    image-rendering: -webkit-optimize-contrast;
    }
  
  /* === Mobile ============================================================= */
  
  @media (max-width: 768px) {
    .menuContainer {
      padding: 0 var(--space-md);
      padding-top: var(--space-md);
    }
  }
  